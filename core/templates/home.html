{% extends 'base.html' %}
{% load static %}
{% block content %}
{% comment %} Hero Section {% endcomment %}
<section id="hero-section"
    class="h-[60vh] md:h-screen bg-cover bg-center rounded flex flex-col justify-center items-center"
    style="background-image: url('{% static 'images/hero.jpeg' %}')">
    <h2 class="text-xl md:text-2xl font-bold mb-4 text-center text-white pt-20 md:pt-60">
        Welcome to DARK EVENT
    </h2>
    <p class="mb-4 text-center text-white text-base md:text-lg">
        Your one-stop solution for all event management needs.
    </p>
    <div class="text-center">
        <button class="bg-blue-500 text-white p-2 rounded" id="get-started-btn">
            Get Started
        </button>
    </div>
</section>

{% comment %} Featured Event Section {% endcomment %}
<section id="Featured-Event" class="mt-6">
    <div id="featured-event-date" data-date="{{ fast_event.date|date:'Y-m-d H:i:s' }}" style="display:none;"></div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-white p-2 rounded bg-red-500">
        <div class="flex items-center">
            <div class="bg-white p-2 rounded-full w-12 h-12 flex items-center justify-center  text-blue-500">
                <!-- SVG icon -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M6.75 2.994v2.25m10.5-2.25v2.25m-14.252 13.5V7.491a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v11.251m-18 0a2.25 2.25 0 0 0 2.25 2.25h13.5a2.25 2.25 0 0 0 2.25-2.25m-18 0v-7.5a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v7.5m-6.75-6h2.25m-9 2.25h4.5m.002-2.25h.005v.006H12v-.006Zm-.001 4.5h.006v.006h-.006v-.005Zm-2.25.001h.005v.006H9.75v-.006Zm-2.25 0h.005v.005h-.006v-.005Zm6.75-2.247h.005v.005h-.005v-.005Zm0 2.247h.006v.006h-.006v-.006Zm2.25-2.248h.006V15H16.5v-.005Z" />
                </svg>
            </div>
            <div class="ml-4">
                <h2 class="text-lg md:text-2xl font-bold">{{ fast_event.name }}</h2>
                <p class="text-sm md:text-base">Don't Miss The Event.</p>
            </div>
        </div>

        <div class="flex space-x-2 md:space-x-4 justify-between" id="event-time">
            <div>
                <h2 class="text-lg md:text-2xl font-bold" id="countdown-days">{{ days_left }}</h2>
                <p>Days</p>
            </div>
            <div>
                <h2 class="text-lg md:text-2xl font-bold" id="countdown-hours">{{ hours_left }}</h2>
                <p>Hours</p>
            </div>
            <div>
                <h2 class="text-lg md:text-2xl font-bold" id="countdown-minutes">{{ minutes_left }}</h2>
                <p>Minutes</p>
            </div>
            <div>
                <h2 class="text-lg md:text-2xl font-bold" id="countdown-seconds">{{ seconds_left }}</h2>
                <p>Seconds</p>
            </div>
        </div>

        <div class="flex items-center justify-center" id="ticket-info">
            <button class="bg-blue-500 text-white p-2 w-40 rounded mt-1" id="tickets-details-btn">
                Tickets & Details
            </button>
        </div>
    </div>
</section>

<section id="event-list">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
        {% for event in events %}
        <div class="bg-white shadow-sm p-4 rounded relative">
            <div>
                <img class="w-full h-full md:h-48 lg:h-60 object-cover rounded-t-lg" src="{{ event.image.url }}"
                    alt="{{ event.name }}" />
            </div>
            <div class="absolute top-4 left-4 bg-gray-100 m-2 p-1 rounded">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                </svg>
            </div>
            <div class="absolute top-4 right-4 bg-blue-500 text-white p-2 rounded-br m-2">
                <h2 class="text-lg font-bold">{{ event.date|date:"d" }}</h2>
                <p class="text-sm">{{ event.date|date:"M" }}</p>
            </div>
            <h3 class="text-xl font-bold mb-2">{{ event.name }}</h3>
            <p class="mb-2">Description: {{ event.description|truncatewords:10 }}.</p>
            <p>Category: {{ event.category.name }}</p>
            <p class="mb-2">Date: {{ event.date|date:"Y-m-d" }}</p>
            <p class="mb-2">Location: {{ event.location }}</p>

            <div class="flex justify-between items-center">
            <button class="bg-blue-500 text-white p-2 rounded mt-2" data-id="{{ event.id }}"
                data-name="{{ event.name }}" data-description="{{ event.description }}"
                data-category="{{ event.category.name }}" data-date="{{ event.date|date:'Y-m-d' }}"
                data-image="{{ event.image.url }}" data-location="{{ event.location }}"
                onclick="showEventDetailsFromButton(this)">Show Details</button>
            {% if user.is_authenticated %}
                {% if event.id in user_rsvp_event_ids %}
                    <button class="bg-green-500 text-white p-2 rounded mt-2 cursor-not-allowed" disabled>RSVP'd</button>
                {% else %}
                    <form action="{% url 'rsvp_event' event.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="bg-blue-500 text-white p-2 rounded mt-2">I'm Interested</button>
                    </form>
                {% endif %}
            {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="col-span-3 text-center py-8 text-gray-500 text-lg font-semibold">
            No events found.
        </div>
        {% endfor %}
    </div>
    <!-- Event Details Modal -->
    <div id="event-details"
        class="fixed inset-0 flex items-center justify-center opacity-0 hidden transition-opacity duration-300 z-50">
        <div
            class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md transform scale-90 transition-transform duration-300 relative">
            <button onclick="closeEventDetails()"
                class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            <img id="event-img" src="" alt="Event Image" class="w-full h-48 object-cover rounded mb-4" />
            <h2 id="event-name" class="text-2xl font-bold mb-2"></h2>
            <p id="event-description" class="mb-2"></p>
            <p id="event-category" class="mb-2 font-semibold"></p>
            <p id="event-date-full" class="mb-2 font-semibold"></p>
            <p id="event-location" class="mb-2 font-semibold"></p>
        </div>
    </div>
</section>

{% comment %} Upcoming Events {% endcomment %}

</section>

{% comment %} Participant Details {% endcomment %}
<section id="participant-details">
    <div class="bg-white p-4 rounded mt-4">
        <div class="w-full">
            <div class="p-4 rounded text-center"></div>
            <img class="w-20 h-20 rounded-full mx-auto mb-2" src="{% static 'images/profiles/user01.png' %}"
                alt="Participant 1" />
            <h3 class="text-lg font-bold text-center">IMRAN HOSSEN</h3>
            <p class="text-center">IMRAN HOSSEN is a software engineer with 5 years of experience in web
                development.</p>
            <h3 class="text-lg font-bold text-center">Participant 1</h3>
        </div>
    </div>
    </div>
</section>

{% comment %} Join Event {% endcomment %}
<section id="Join-event" class="bg-black p-4 rounded mt-4 border-red-500 border-b-1">
    <h2 class="text-xl md:text-2xl font-bold mb-4 text-center text-white">Join Event</h2>
    <p class="text-center text-white">Join us for an exciting event filled with learning and networking
        opportunities.</p>
    <div class="text-center mt-4">
        <button class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition-colors" id="join-now-btn">
            Join Now
        </button>
    </div>
</section>

<script src="{% static 'js/script.js' %}"></script>

{% comment %} Footer {% endcomment %}
{% block footer %}
    {% include 'footer.html' %}
{% endblock %}
{% endblock content %}